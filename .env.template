# DocN - Environment Configuration Template
# Copy this file to .env or appsettings.Development.json and fill in your values

# ⚠️ SECURITY WARNING ⚠️
# This is a TEMPLATE file. Never commit actual credentials to version control.
# Use environment variables, Azure Key Vault, AWS Secrets Manager, or similar
# secure vault solutions for production credentials.

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Main application database (PostgreSQL)
# ⚠️ Replace YOUR_PASSWORD_HERE with actual password
DATABASE_CONNECTION_STRING=Host=localhost;Database=docn;Username=postgres;Password=YOUR_PASSWORD_HERE;Port=5432

# Vector database connection (PostgreSQL with pgvector)
# Can be same as DATABASE_CONNECTION_STRING or separate instance
VECTOR_DATABASE_CONNECTION_STRING=Host=localhost;Database=docn;Username=postgres;Password=YOUR_PASSWORD_HERE;Port=5432

# =============================================================================
# AI PROVIDERS - Configure at least ONE
# =============================================================================

# ----- OpenAI -----
OPENAI_API_KEY=sk-YOUR_OPENAI_API_KEY_HERE
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4
OPENAI_ORGANIZATION_ID=                    # Optional

# ----- Azure OpenAI -----
AZURE_OPENAI_ENDPOINT=https://YOUR_RESOURCE_NAME.openai.azure.com/
AZURE_OPENAI_API_KEY=YOUR_AZURE_OPENAI_KEY_HERE
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-ada-002
AZURE_OPENAI_CHAT_DEPLOYMENT=gpt-4
AZURE_OPENAI_API_VERSION=2023-05-15

# ----- Anthropic Claude -----
ANTHROPIC_API_KEY=sk-ant-YOUR_ANTHROPIC_KEY_HERE
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# ----- Google Gemini -----
GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY_HERE
GOOGLE_MODEL=gemini-pro

# =============================================================================
# AI PROVIDER SELECTION
# =============================================================================

# Default provider to use (OpenAI, AzureOpenAI, Anthropic, Google)
DEFAULT_AI_PROVIDER=OpenAI

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================

# Vector database provider (PostgreSQL, Qdrant, Pinecone, Weaviate)
VECTOR_DATABASE_PROVIDER=PostgreSQL

# Vector dimensions (must match embedding model)
# text-embedding-3-small: 1536
# text-embedding-3-large: 3072
# text-embedding-ada-002: 1536
VECTOR_DIMENSIONS=1536

# pgvector index type (HNSW, IVFFlat)
PGVECTOR_INDEX_TYPE=HNSW

# HNSW index parameters
PGVECTOR_HNSW_M=16                         # Number of connections per layer
PGVECTOR_HNSW_EF_CONSTRUCTION=64           # Size of dynamic candidate list
PGVECTOR_HNSW_EF_SEARCH=40                 # Size of search candidate list

# =============================================================================
# CACHE CONFIGURATION (Optional but recommended for production)
# =============================================================================

# Redis connection string (leave empty to disable caching)
REDIS_CONNECTION_STRING=localhost:6379,password=YOUR_REDIS_PASSWORD

# Cache TTL in minutes
CACHE_EMBEDDING_TTL_MINUTES=1440           # 24 hours
CACHE_SEARCH_RESULTS_TTL_MINUTES=60        # 1 hour
CACHE_AI_RESPONSES_TTL_MINUTES=30          # 30 minutes

# =============================================================================
# RAG CONFIGURATION
# =============================================================================

# Retrieval settings
RAG_TOP_K_RESULTS=10                       # Number of documents to retrieve
RAG_SIMILARITY_THRESHOLD=0.7               # Minimum similarity score (0-1)

# MMR (Maximal Marginal Relevance) settings
RAG_USE_MMR=true
RAG_MMR_LAMBDA=0.5                         # Balance relevance vs diversity (0-1)
RAG_MMR_TOP_K=5                            # Final number of diverse results

# Reranking settings
RAG_USE_RERANKING=true
RAG_RERANKING_MODEL=cross-encoder/ms-marco-MiniLM-L-12-v2

# Query rewriting
RAG_USE_QUERY_REWRITING=true
RAG_QUERY_REWRITING_MODEL=gpt-4

# HyDE (Hypothetical Document Embeddings)
RAG_USE_HYDE=false                         # Experimental feature

# Contextual compression
RAG_USE_CONTEXTUAL_COMPRESSION=true

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# JWT settings
JWT_SECRET_KEY=YOUR_SECRET_KEY_HERE_MINIMUM_32_CHARACTERS_LONG_RANDOM_STRING
JWT_ISSUER=DocN
JWT_AUDIENCE=DocN.Client
JWT_EXPIRATION_MINUTES=60

# Password hashing
PASSWORD_HASH_ITERATIONS=10000
PASSWORD_HASH_SALT_SIZE=16

# Encryption key for sensitive data (credentials, etc.)
ENCRYPTION_KEY=YOUR_ENCRYPTION_KEY_32_CHARACTERS_MIN

# Key Vault configuration (for production)
# AZURE_KEY_VAULT_URI=https://your-keyvault.vault.azure.net/
# AWS_KMS_KEY_ID=arn:aws:kms:region:account:key/key-id

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Storage provider (Local, AzureBlob, AmazonS3)
STORAGE_PROVIDER=Local

# Local storage path
LOCAL_STORAGE_PATH=/var/docn/storage

# Azure Blob Storage (if using AzureBlob)
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...
# AZURE_STORAGE_CONTAINER_NAME=documents

# Amazon S3 (if using AmazonS3)
# AWS_ACCESS_KEY_ID=YOUR_AWS_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_AWS_SECRET_KEY
# AWS_S3_BUCKET_NAME=docn-documents
# AWS_S3_REGION=us-east-1

# =============================================================================
# DOCUMENT PROCESSING
# =============================================================================

# Maximum file upload size in MB
MAX_UPLOAD_SIZE_MB=100

# Supported file extensions (comma-separated)
SUPPORTED_FILE_EXTENSIONS=.pdf,.docx,.doc,.txt,.md,.html,.htm,.rtf,.odt

# Text extraction settings
TEXT_EXTRACTION_TIMEOUT_SECONDS=300
TEXT_EXTRACTION_MAX_PAGES=1000

# Chunking strategy
CHUNKING_STRATEGY=RecursiveCharacterTextSplitter
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# =============================================================================
# CONNECTORS CONFIGURATION
# =============================================================================

# SharePoint (if using SharePoint connector)
# SHAREPOINT_TENANT_ID=YOUR_TENANT_ID
# SHAREPOINT_CLIENT_ID=YOUR_CLIENT_ID
# SHAREPOINT_CLIENT_SECRET=YOUR_CLIENT_SECRET

# Google Drive (if using Google Drive connector)
# GOOGLE_DRIVE_CLIENT_ID=YOUR_CLIENT_ID
# GOOGLE_DRIVE_CLIENT_SECRET=YOUR_CLIENT_SECRET
# GOOGLE_DRIVE_REDIRECT_URI=https://your-domain.com/oauth/callback

# OneDrive (if using OneDrive connector)
# ONEDRIVE_CLIENT_ID=YOUR_CLIENT_ID
# ONEDRIVE_CLIENT_SECRET=YOUR_CLIENT_SECRET
# ONEDRIVE_REDIRECT_URI=https://your-domain.com/oauth/callback

# =============================================================================
# INGESTION SCHEDULER
# =============================================================================

# Enable background scheduler
INGESTION_SCHEDULER_ENABLED=true

# Scheduler check interval in seconds
INGESTION_SCHEDULER_CHECK_INTERVAL_SECONDS=60

# Maximum concurrent ingestion jobs
INGESTION_MAX_CONCURRENT_JOBS=3

# Retry settings for failed ingestions
INGESTION_MAX_RETRIES=3
INGESTION_RETRY_DELAY_SECONDS=300          # 5 minutes

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log level (Trace, Debug, Information, Warning, Error, Critical)
LOG_LEVEL=Information

# Application Insights (Azure)
# APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=...

# Serilog Elasticsearch
# ELASTICSEARCH_URI=http://localhost:9200
# ELASTICSEARCH_INDEX_PREFIX=docn-logs

# =============================================================================
# PERFORMANCE & SCALABILITY
# =============================================================================

# Enable distributed locking (for multi-instance deployments)
DISTRIBUTED_LOCKING_ENABLED=false
DISTRIBUTED_LOCKING_PROVIDER=Redis         # Redis, SqlServer, PostgreSQL

# Rate limiting
RATE_LIMITING_ENABLED=true
RATE_LIMITING_REQUESTS_PER_MINUTE=100

# Connection pool settings
DATABASE_MAX_POOL_SIZE=100
DATABASE_MIN_POOL_SIZE=5

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable experimental features
FEATURE_MULTI_AGENT_COLLABORATION=true
FEATURE_ADVANCED_RERANKING=true
FEATURE_QUERY_REWRITING=true
FEATURE_HYDE=false
FEATURE_DLP_SCANNING=false

# =============================================================================
# DEVELOPMENT SETTINGS (Remove in production)
# =============================================================================

# Enable detailed error pages
ASPNETCORE_ENVIRONMENT=Development

# Enable Swagger UI
SWAGGER_ENABLED=true

# CORS settings (comma-separated origins)
CORS_ALLOWED_ORIGINS=http://localhost:5000,https://localhost:5001

# Seed demo data on startup
SEED_DEMO_DATA=false

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Application URL
# APPLICATION_URL=https://your-domain.com

# Enable HTTPS redirect
# HTTPS_REDIRECT_ENABLED=true

# HSTS settings
# HSTS_MAX_AGE_DAYS=365
# HSTS_INCLUDE_SUBDOMAINS=true

# Security headers
# ENABLE_SECURITY_HEADERS=true

# Health check endpoint
# HEALTH_CHECK_PATH=/health

# =============================================================================
# MULTI-TENANCY
# =============================================================================

# Tenant isolation mode (Database, Schema, Discriminator)
TENANT_ISOLATION_MODE=Discriminator

# Default tenant (for development)
DEFAULT_TENANT_ID=1

# =============================================================================
# EMAIL NOTIFICATIONS (Optional)
# =============================================================================

# SMTP settings
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@docn.dev
# SMTP_FROM_NAME=DocN Notifications
# SMTP_USE_SSL=true

# =============================================================================
# NOTES
# =============================================================================

# 1. Never commit this file with real credentials to version control
# 2. Use environment variables or Azure Key Vault in production
# 3. Minimum required: DATABASE_CONNECTION_STRING + one AI provider key
# 4. For production, review and configure all security settings
# 5. Test connectivity after configuration with: dotnet run --project DocN.Server

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
